inputs:
    - Stdin:
        codec: json
        type: stdin1
    - Kafka:
        type: testlog
        topic:
            test: 1
        codec: json
        consumer_settings:
            bootstrap.servers: "10.0.0.100:9092"
            group.id: hangout.test

filters:
    - Add:
        fields:
            xxx: xxx
            yyy: '[client]'
            zzz: '[stored][message]'
            '[a][b]': '[stored][message]'
    - Grok:
        src: message
        match:
            - '^(?P<user>\w+) (?P<status>\d+)$'
        remove_fields: ['message']
    - Date:
        location: 'Asia/Shanghai'
        src: logtime
        formats:
            - 'RFC3339'
            - '2006-01-02T15:04:05Z07:00'
            - '2006-01-02T15:04:05Z0700'
            - '2006-01-02'
            - 'UNIX'
            - 'UNIX_MS'
        remove_fields: ["logtime"]

outputs:
    - Stdout: {}
    - Elasticsearch:
        hosts:
            - http://127.0.0.1:9200
        index: 'web-%{+2006-01-02}' // golang里面的渲染方式就是用数字, 而不是用YYMM.
        index_type: "logs"
        bulk_actions: 5000
        bulk_size: 20
        flush_interval: 60
